<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- Link library leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
crossorigin="" />

<!-- W3 CSS template -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
crossorigin="">
</script>

<style>
  #mapid{
    height: 800px;
  }
</style>

  <title>Tourist map</title>
</head>
<body>
<!-- แบ่งหน้าจอ -->
  <div class="w3-row">
        <div id="mapid" class="w3-half"></div>
        <div id="content" class="w3-half">
            <table class="w3-table w3-striped">
                <tr>
                    <th>ชื่อแหล่งท่องเที่ยว</th>
                    <th>ประเภท</th>
                    <th>ระดับ</th>
                </tr>
                <tr>
                    <td>น้ำตก A</td>
                    <td>ธรรมชาติ</td>
                    <td>A</td>
                </tr>
            </table>
        </div>
    </div>

<!-- เรียกแผนที่ขึ้นมาแสดง -->
<script>
  //เรียกแผนที่
var map = L.map("mapid").setView([18.6942865,97.6655734],8);
  //based map1
var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
  //based map2
var gsat = L.tileLayer("https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}").addTo(map);
  //group layers (1+2)
var baseMaps = {
//ชื่อเลเยอร์(ชั้นข้อมูล)ที่ต้องการแสดงผล:ตัวแปร
    OSM:osm,
    GoogleSat:gsat,
};


//add data
var tourpoint = {
    type: "FeatureCollection",
    name: "tour_plk",
    crs: {
        type: "name",
        properties: { name: "urn:ogc:def:crs:OGC:1.3:CRS84" },
    },
    features: [
        {
            type: "Feature",
            properties: {
                Name: "กิ่วแม่ปาน",
                Type: "อุทยานและวนอุทยาน",
                FID_1: 1358.0,
                CHANGWAT: "เชียงใหม่",
                PROVINCE_1: "chiangmai",
                REGION: "ภาคเหนือ",
                level: "5",
            },
            geometry: {
                type: "MultiPoint",
                coordinates: [[98.4756891,18.5616839]],
            },
          },
          {
             type: "Feature",
            properties: {
                Name: "ดอยม่อนเงาะ",
                Type: "อุทยานและวนอุทยาน",
                FID_1: 1357.0,
                CHANGWAT: "เชียงใหม่",
                PROVINCE_1: "chiangmai",
                REGION: "ภาคเหนือ",
                level: "4.6",
            },
            geometry: {
type: "MultiPoint",
coordinates: [[98.7676493, 19.1799183]],
},
},
{
type: "Feature",
properties: {
Name: "ดอยหลวงเชียงดาว",
Type: "อุทยานและวนอุทยาน",
FID_1: 1362.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.6",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.8591144, 19.3997208]],
},
},
{
type: "Feature",
properties: {
Name: "ดอยม่อนจอง",
Type: "อุทยานและวนอุทยาน",
FID_1: 1364.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.8",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.5482952, 17.4432306]],
},
},
{
type: "Feature",
properties: {
Name: "เขื่อนแม่งัด",
Type: "เขื่อนกักเก็บน้ำ",
FID_1: 1355.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.3",
},
geometry: {
type: "MultiPoint",
coordinates: [[99.0285237, 19.1741473]],
},
},
{
type: "Feature",
properties: {
Name: "สวนสนบ่อแก้ว",
Type: "อุทยานและวนอุทยาน",
FID_1: 1365.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.4",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.3863261, 18.1566228]],
},
},
{
type: "Feature",
properties: {
Name: "วัดพระธาตุดอยสุเทพราชวรวิหาร",
Type: "วัด",
FID_1: 733.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.7",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.9194396, 18.8049889]],
},
},
{
type: "Feature",
properties: {
Name: "ประตูท่าแพ",
Type: "สถานที่สำคัญทางประวัติศาสตร์",
FID_1: 1359.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.3",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.9933608, 18.7876492]],
},
},
{
type: "Feature",
properties: {
Name: "สวนพฤกษศาสตร์สมเด็จพระนางเจ้าสิริกิติ์",
Type: "อุทยานและวนอุทยาน",
FID_1: 603.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.5",
},
geometry: {
type: "MultiPoint",
coordinates: [[98.8610191, 18.8881346]],
},
},
{
type: "Feature",
properties: {
Name: "อุทยานแห่งชาติน้ำตกบัวตอง-น้ำพุเจ็ดสี",
Type: "อุทยานธรรมชาติ",
FID_1: 611.0,
CHANGWAT: "เชียงใหม่",
PROVINCE_1: "chiangmai",
REGION: "ภาคเหนือ",
level: "4.7",
},
geometry: {type: "MultiPoint",coordinates:[[99.044472, 19.0691986]]},
},
],
};


//add marker and popup
        var tourLayer = L.geoJSON(tourpoint, {
            pointToLayer: function (feature, latlng) {
                return L.marker(latlng).bindPopup(feature.properties.Name);
            },
            onEachFeature: function (feature, layer) {
              layer.on("mouseover", function () {
                  document
                      .getElementById(feature.properties.FID_1)
                      .classList.add("w3-red");
              });

               layer.on("mouseout", function () {
                  document
                      .getElementById(feature.properties.FID_1)
                      .classList.remove("w3-red");
              });
            },
         }).addTo(map);


//link table with popup and marker
var cont = "";
cont += "<table class='w3-table w3-striped'>";
cont += "<tr>";
cont += "<th>ชื่อแหล่งท่องเที่ยว</th>";
cont += "<th>ประเภท</th>";
cont += "<th>ระดับ</th>";
cont += "</tr>";
for (let i in tourpoint.features) {
     cont += "<tr id=" + tourpoint.features[i].properties.FID_1 + ">";
     cont += "<td>" + tourpoint.features[i].properties.Name + "</td>";
     cont += "<td>" + tourpoint.features[i].properties.Type + "</td>";
     cont += "<td>" + tourpoint.features[i].properties.level + "</td>";
     cont += "</tr>";
}
cont += "</table>";
console.log(cont);
document.getElementById("content").innerHTML = cont;

//create polygon
var polygonGeoJson = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "stroke": "#555555",
        "stroke-width": 2,
        "stroke-opacity": 1,
        "fill": "#ee5db2",
        "fill-opacity": 0.5
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              98.4649658203125,
              19.678797982361385
            ],
            [
              98.536376953125,
              19.611543503814232
            ],
            [
              98.58032226562499,
              19.528730138897632
            ],
            [
              98.5858154296875,
              19.45105402980001
            ],
            [
              98.5858154296875,
              19.32669491605546
            ],
            [
              98.59130859375,
              19.197053439464852
            ],
            [
              98.6407470703125,
              19.103648251663646
            ],
            [
              98.5638427734375,
              19.062117883514652
            ],
            [
              98.4649658203125,
              19.05173366503917
            ],
            [
              98.3990478515625,
              19.062117883514652
            ],
            [
              98.3331298828125,
              19.129599439736836
            ],
            [
              98.250732421875,
              19.150357455407473
            ],
            [
              98.184814453125,
              18.979025953255267
            ],
            [
              98.1353759765625,
              18.916679786648565
            ],
            [
              98.0914306640625,
              18.80751806940863
            ],
            [
              98.1134033203125,
              18.7971180132841
            ],
            [
              98.1134033203125,
              18.734704192913256
            ],
            [
              98.1463623046875,
              18.656654486540006
            ],
            [
              98.19580078125,
              18.63583516062285
            ],
            [
              98.173828125,
              18.526491895773912
            ],
            [
              98.118896484375,
              18.490028573953296
            ],
            [
              98.10791015625,
              18.458768120015126
            ],
            [
              98.1243896484375,
              18.437924653474408
            ],
            [
              98.19580078125,
              18.323240460443397
            ],
            [
              98.1463623046875,
              18.25021997706561
            ],
            [
              98.162841796875,
              18.19282519773319
            ],
            [
              98.1683349609375,
              18.145851771694467
            ],
            [
              98.2122802734375,
              18.098865720894775
            ],
            [
              98.20678710937499,
              18.020527657852337
            ],
            [
              98.1353759765625,
              17.96828290799978
            ],
            [
              98.05847167968749,
              17.90556881196468
            ],
            [
              98.09692382812499,
              17.80622614478282
            ],
            [
              98.1243896484375,
              17.727758609852284
            ],
            [
              98.0914306640625,
              17.68066158373626
            ],
            [
              98.140869140625,
              17.59166687838161
            ],
            [
              98.2177734375,
              17.57595737307669
            ],
            [
              98.32763671875,
              17.5602465032949
            ],
            [
              98.3221435546875,
              17.4607127104298
            ],
            [
              98.32763671875,
              17.37685256104539
            ],
            [
              98.41552734375,
              17.219511333785114
            ],
            [
              98.492431640625,
              17.24574420800713
            ],
            [
              98.536376953125,
              17.28246396789921
            ],
            [
              98.558349609375,
              17.31917640744285
            ],
            [
              98.5528564453125,
              17.40830462902467
            ],
            [
              98.5198974609375,
              17.528820674552627
            ],
            [
              98.5198974609375,
              17.68066158373626
            ],
            [
              98.4979248046875,
              17.785304836705027
            ],
            [
              98.5748291015625,
              17.790535393588975
            ],
            [
              98.6517333984375,
              17.82714499951342
            ],
            [
              98.7396240234375,
              17.82714499951342
            ],
            [
              98.81103515625,
              17.84283252904802
            ],
            [
              98.81103515625,
              17.95260646769184
            ],
            [
              98.78356933593749,
              18.03097474989003
            ],
            [
              98.8275146484375,
              18.135411517108345
            ],
            [
              98.778076171875,
              18.255436745247998
            ],
            [
              98.7066650390625,
              18.302380604025146
            ],
            [
              98.6956787109375,
              18.396230138028827
            ],
            [
              98.76708984374999,
              18.437924653474408
            ],
            [
              98.82202148437499,
              18.521283325496277
            ],
            [
              98.8604736328125,
              18.542116654448996
            ],
            [
              98.94287109375,
              18.60460138845525
            ],
            [
              99.019775390625,
              18.656654486540006
            ],
            [
              99.16259765625,
              18.703488628334817
            ],
            [
              99.21203613281249,
              18.63583516062285
            ],
            [
              99.29443359375,
              18.562947442888312
            ],
            [
              99.33837890625,
              18.599395202198725
            ],
            [
              99.33837890625,
              18.630629930377246
            ],
            [
              99.33837890625,
              18.703488628334817
            ],
            [
              99.3768310546875,
              18.838714379258032
            ],
            [
              99.38232421875,
              18.93746442964186
            ],
            [
              99.404296875,
              19.03096327846469
            ],
            [
              99.36035156249999,
              19.114029215761995
            ],
            [
              99.327392578125,
              19.228176737766262
            ],
            [
              99.3218994140625,
              19.362976133341846
            ],
            [
              99.2999267578125,
              19.476950206488414
            ],
            [
              99.2999267578125,
              19.570142140282975
            ],
            [
              99.29443359375,
              19.68914232238881
            ],
            [
              99.393310546875,
              19.80805412808859
            ],
            [
              99.3878173828125,
              19.89588839936505
            ],
            [
              99.45373535156249,
              19.96818594248975
            ],
            [
              99.4482421875,
              20.040450354169483
            ],
            [
              99.349365234375,
              20.076570104545173
            ],
            [
              99.2340087890625,
              20.1023648329449
            ],
            [
              99.1131591796875,
              20.097206227083888
            ],
            [
              99.0692138671875,
              19.993998469485504
            ],
            [
              99.03076171875,
              19.87522588708924
            ],
            [
              99.00878906249999,
              19.77187296079673
            ],
            [
              98.909912109375,
              19.77187296079673
            ],
            [
              98.82202148437499,
              19.79254892024401
            ],
            [
              98.67370605468749,
              19.751194318940865
            ],
            [
              98.5858154296875,
              19.715000248204287
            ],
            [
              98.4649658203125,
              19.678797982361385
            ]
          ]
        ]
      }
    }
  ]
}

var polygonLayer = L.geoJSON(polygonGeoJson, {
    style: function (feature) {
        return { color: feature.properties.color };
    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.name);

        layer.on("mouseover", function () {
            layer.openPopup();
        });

        layer.on("mouseout", function () {
            layer.closePopup();
        });
     },
});


//group poin+polygon layers
var overlays ={
    ตำแหน่งสถานที่ท่องเที่ยว:tourLayer,
    ขอบเขตจังหวัดเชียงใหม่:polygonLayer
};


//สร้างเลเยอร์คอนโทร
L.control.layers(baseMaps,overlays).addTo(map);
</script>
</body>
</html>
